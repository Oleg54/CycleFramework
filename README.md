# Cycle Framework
### Пакет для упрощения разработки игр
Содержит простые инструменты для работы с UI окнами, игровым циклом, игровыми данными, логику взаимодействия игровых компонентов

## Интеграция
* Установить пакет в проект
* Добавить префабы цикла и canvas на сцену

## Как работать?
### Пакет содержит следующие основные элементы:
* CycleState. Фреймворк имеет примитивную FSM, которая отвечает за выполнение кода в классах CycleInitializer`s. Стейтов может быть множество, но активным может быть только один.
* CycleInitializer. В рамках фреймфорка вся ответственность за инициирование действий лежит на этих классах. Для работы нужно создать класс и унаследоваться от CycleInitializerBase, далее поместить этот компонент на сцену, в иерахию CycleFrameworkBootloader/Initializers/[CycleState] <X> где X - нужный стейт. Методы цикла, доступные для переопределения: OnInit, OnUpdate, OnFixedUpdate. Их вызовы контролируются текущим активным CycleState.
* UIScreen. Класс, от которого наследуются все UI окна. Для работы нужно создать класс, унаследовать его от UIScreen и поместить в список окон в иерархии Canvas/Screens. Префаб Canvas Содержит компонент UIScreenRepository для доступа ко всем окнам. Пример доступа: UIScreenRepository.GetScreen<SomeUIScreen>().gameObject.SetActive(false); Окна как правило хранят в себе ссылки на определенную часть UI игры, объединенную общим смыслом (например окно настроек, окно магазина). Управление окнами в идеале должно происходить из классов-наследников CycleInitializer. 
* Global Data. Глобальные данные игры. Сюда добавляем все данные, которые могут понадобиться во нескольких местах. Этот объект серилизируемый, то есть данные в нем сохраняются между игровыми сессиями. Для отделения сохраняемых данных от несохраняемых используйте аттрибуты [SerializeField] и [NonSerialized].
* FrameworkCommander. Класс для управления игровым циклом. Есть ивент для подписки на событие смены текущего CycleState, методы для смены CycleState и сохранения игры, свойство для получения доступа к GlobalData.

## Итого
* Для работы на сцене должны находиться два объекта: CycleFrameworkBootloader и Canvas.
* Управление игрой и компонентами происходит из классов-наследников CycleInitializerBase, находящихся в иерархии CycleFrameworkBootloader/Initializers/[CycleState] <X>.
* Все классы-наследники CycleInitializerBase привязаны к конкретному игровому стейту CycleState, методы внутри вызываются в соответствии с текущим активным CycleState.
* Все UI окна находятся в иерархии Canvas/Screens. Получение окон - UIScreenRepository.GetScreen<SomeUIScreen>(). Окна меняют свое состояние только при участии классов CycleInitializer.
* Общие данные хранятся в объекте GlobalData, доступ к которому можно получить с помощью FrameworkCommander.GlobalData. Сохраняемые данные от несохраняемых отделяются атрибутами.
* Класс FrameworkCommander инкапсулирует в себе интерфейс для управления игровым состоянием фреймворка. 
